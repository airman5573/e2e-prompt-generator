(function(){"use strict";const o=new Map,r={enabled:{16:"icons/inspector-on-16.png",32:"icons/inspector-on-32.png",48:"icons/inspector-on-48.png",128:"icons/inspector-on-128.png"},disabled:{16:"icons/inspector-off-16.png",32:"icons/inspector-off-32.png",48:"icons/inspector-off-48.png",128:"icons/inspector-off-128.png"}};function c(e,n){const t=n?r.enabled:r.disabled;chrome.action.setIcon({tabId:e,path:t}),chrome.action.setBadgeText({tabId:e,text:n?"ON":""}),n&&chrome.action.setBadgeBackgroundColor({tabId:e,color:"#d32f2f"})}function a(e){const n=!o.get(e);o.set(e,n),c(e,n),chrome.tabs.sendMessage(e,{type:"ELEMENT_INSPECTOR_SET_STATE",enabled:n},t=>{chrome.runtime.lastError?(console.warn("[Element Inspector] 메시지 전송 실패:",chrome.runtime.lastError.message),o.set(e,!1),c(e,!1)):t||(o.set(e,!1),c(e,!1))})}chrome.action.onClicked.addListener(e=>{e.id&&a(e.id)}),chrome.tabs.onRemoved.addListener(e=>{o.delete(e)}),chrome.runtime.onMessage.addListener((e,n,t)=>{if(!(!e||!e.type)&&e.type==="ELEMENT_INSPECTOR_REQUEST_STATE"){const s=n.tab?.id;if(!s){t({enabled:!1});return}const i=!!o.get(s);o.set(s,i),c(s,i),t({enabled:i})}}),chrome.runtime.onInstalled.addListener(()=>{chrome.action.setBadgeText({text:""})})})();
